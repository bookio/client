(function(){var e=["css!./timeslider"];define(e,function(e){var t=function(e){function f(){var t='<div class="container"><div class="left scroll"><div class="ui-icon ui-icon-arrow-l"/></div><div class="slider-container"><div class="slider"><div class="gripper"></div></div></div><div class="right scroll"><div class="ui-icon ui-icon-arrow-r"/></div></div>',r=$(t);e.element.append(r);n.root=r;n.slider=n.root.find(".slider");n.gripper=n.root.find(".gripper");$(document).on("updatelayout.timeslider",function(e){h()});n.gripper.css({height:e.options.size,width:e.options.size});n.slider.on("doubletap",function(t){e.element.trigger("dblclick")});n.root.on("removed",function(){Notifications.off(".timeslider");$(window).off(".timeslider");$(document).off(".timeslider")});e.element.on("updatelayout",function(){a||h(300);u=!1})}function l(t){function n(){e.element.trigger("scroll",t)}o==null&&(o=setInterval(n,80))}function c(){o!=null&&clearInterval(o);o=null}function h(e){var t=n.slider,o={};o.left=sprintf("%f%%",r*100/s);o.width=sprintf("%f%%",i*100/s);e!=undefined&&e?t.transition(o,e,"easeInOutBack"):t.css(o)}function p(){function e(e){l(e);$(document).on(isTouch()?"touchend.timeslider":"mouseup.timeslider",function(){c();$(document).off(".timeslider")})}n.root.find(".scroll.left").on(isTouch()?"touchstart":"mousedown",function(){e(-1)});n.root.find(".scroll.right").on(isTouch()?"touchstart":"mousedown",function(){e(1)})}function d(){var t=n.slider,o=t.parent();t.on(isTouch()?"touchstart":"mousedown",function(u){var f=u.originalEvent.pageX-t.offset().left,p=t.outerWidth()-f;u.preventDefault();var d=f<t.innerWidth()-t.innerHeight();$(document).on("mousemove.timeslider touchmove.timeslider",function(u){a=!0;var h=t.position().left,v=t.outerWidth(),m={},g=n.root.find(".left").outerWidth(),y=n.root.find(".right").outerWidth();if(d){h=u.originalEvent.pageX-o.offset().left-f;h=Math.max(h,-g);h=Math.min(h,o.innerWidth()-t.outerWidth()+g);t.css({left:h});h<0?l(-1):h+v>o.innerWidth()?l(1):c()}else{v=u.originalEvent.pageX-o.offset().left-t.position().left+p;v=Math.max(v,t.innerHeight()*1.5);v=Math.min(v,o.innerWidth()-t.position().left+y);t.css({width:v})}var b,w=t.parent().innerWidth();b=Math.floor(v/w*s+.5);b=Math.max(b,1);var E;E=Math.floor(h/w*s+.5);E=Math.min(E,s-b);E=Math.max(E,0);if(E!=r){r=E;e.element.trigger("positionchanged",r)}if(b!=i){i=b;e.element.trigger("lengthchanged",i)}});$(document).on("mouseup.timeslider touchend.timeslider",function(e){h(300);c();$(document).off(".timeslider");d=!1;a=!1})})}var t=this,n={},r=e.options.position,i=e.options.length,s=e.options.range,o=null,u=!0,a=!1;this.position=function(e){if(e==undefined)return r;u=!0;return r=e};this.range=function(e){if(e==undefined)return s;u=!0;return s=e};this.length=function(e){if(e==undefined)return i;u=!0;return i=e};f();d();p();h();this.refresh=h},n={};n.options={};n.options.size="25px";n.options.length=7;n.options.position=3;n.options.range=10;n._create=function(){this.widget=new t(this)};n.refresh=function(){this.widget.refresh()};n.position=function(e){return this.widget.position(e)};n.length=function(e){return this.widget.length(e)};n.range=function(e){return this.widget.range(e)};$.widget("mobile.timeslider",$.mobile.widget,n);$(document).bind("pagecreate create",function(e){$(":jqmData(role=timeslider)",e.target).timeslider()})})})();